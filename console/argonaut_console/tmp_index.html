<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Argonaut Architecture Command Deck</title>
  <meta name="description" content="Argonaut multi-agent security triage factory visualization and controls." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap"
    rel="stylesheet" />
  <style>
    :root {
      --bg-0: #050505;
      --bg-1: #0d1119;
      --bg-2: #121724;
      --panel: rgba(18, 23, 36, 0.84);
      --panel-strong: rgba(20, 26, 40, 0.95);
      --panel-soft: rgba(255, 255, 255, 0.04);
      --text: #e9ebf3;
      --muted: #9aa1b2;
      --line: rgba(213, 209, 209, 0.2);
      --line-strong: rgba(213, 209, 209, 0.32);
      --brand: #871a11;
      --brand-bright: #c53a2f;
      --secondary: #0a0a36;
      --secondary-bright: #1d2a7a;
      --good: #10b981;
      --warn: #f59e0b;
      --danger: #ef4444;
      --info: #60a5fa;
      --shadow-soft: 0 12px 28px rgba(0, 0, 0, 0.35);
      --shadow-strong: 0 24px 60px rgba(0, 0, 0, 0.55);
      --nav-bg: rgba(10, 14, 25, 0.82);
      --nav-border: rgba(255, 255, 255, 0.08);
      --nav-fg: #e5e7eb;
      --nav-muted: #9ca3af;
      --nav-hover: rgba(255, 255, 255, 0.08);
      --nav-avatar-border: rgba(255, 255, 255, 0.2);
    }

    body[data-theme='light'] {
      --bg-0: #f4f6fb;
      --bg-1: #e9edf6;
      --bg-2: #dde4f1;
      --panel: rgba(255, 255, 255, 0.88);
      --panel-strong: rgba(255, 255, 255, 0.96);
      --panel-soft: rgba(9, 13, 34, 0.04);
      --text: #161b2d;
      --muted: #475069;
      --line: rgba(10, 10, 54, 0.14);
      --line-strong: rgba(10, 10, 54, 0.25);
      --brand: #871a11;
      --brand-bright: #9f271d;
      --secondary: #0a0a36;
      --secondary-bright: #1f3d8c;
      --good: #0f9f6f;
      --warn: #d08700;
      --danger: #dc2626;
      --info: #2563eb;
      --shadow-soft: 0 12px 28px rgba(14, 20, 40, 0.08);
      --shadow-strong: 0 24px 60px rgba(14, 20, 40, 0.16);
      --nav-bg: rgba(255, 255, 255, 0.84);
      --nav-border: #e5e7eb;
      --nav-fg: #111827;
      --nav-muted: #4b5563;
      --nav-hover: #f3f4f6;
      --nav-avatar-border: rgba(0, 0, 0, 0.05);
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      min-height: 100%;
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Space Grotesk', sans-serif;
      color: var(--text);
      background:
        radial-gradient(circle at 8% 12%, rgba(135, 26, 17, 0.22), transparent 40%),
        radial-gradient(circle at 88% 20%, rgba(47, 79, 191, 0.18), transparent 42%),
        linear-gradient(140deg, var(--bg-0) 0%, var(--bg-1) 38%, var(--bg-2) 100%);
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(to right, rgba(255, 255, 255, 0.03) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
      background-size: 42px 42px;
      mask-image: radial-gradient(circle at center, black 20%, transparent 85%);
      pointer-events: none;
      z-index: -2;
    }

    body::after {
      content: '';
      position: fixed;
      inset: 0;
      background: repeating-linear-gradient(180deg,
          rgba(255, 255, 255, 0.012),
          rgba(255, 255, 255, 0.012) 1px,
          transparent 1px,
          transparent 5px);
      pointer-events: none;
      z-index: -1;
      opacity: 0.35;
    }

    .app-topnav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 30;
      height: 56px;
      border-bottom: 1px solid var(--nav-border);
      background: var(--nav-bg);
      backdrop-filter: blur(10px);
    }

    .app-topnav-inner {
      width: 100%;
      margin: 0;
      padding: 0 1.05rem;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.8rem;
    }

    .app-brand {
      display: inline-flex;
      align-items: center;
      gap: 0.62rem;
      text-decoration: none;
      color: var(--nav-fg);
      transition: opacity 150ms ease;
    }

    .app-brand:hover {
      opacity: 0.82;
    }

    .app-brand img {
      width: 32px;
      height: 32px;
      object-fit: contain;
    }

    .app-brand span {
      font-size: 1.02rem;
      font-weight: 700;
      letter-spacing: 0.11em;
      text-transform: uppercase;
    }

    .app-nav-actions {
      display: flex;
      align-items: center;
      gap: 0;
    }

    .theme-capsule {
      border: 1px solid var(--nav-border);
      background: transparent;
      color: var(--nav-muted);
      height: 34px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.38rem;
      padding: 0 0.72rem;
      cursor: pointer;
      transition: color 150ms ease, border-color 150ms ease, background 150ms ease, transform 150ms ease;
      position: relative;
      text-transform: uppercase;
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.66rem;
      letter-spacing: 0.08em;
      font-weight: 600;
    }

    .theme-capsule:hover {
      color: var(--nav-fg);
      background: var(--nav-hover);
      border-color: color-mix(in srgb, var(--nav-fg) 26%, var(--nav-border));
      transform: translateY(-1px);
    }

    .theme-capsule:active {
      transform: translateY(0);
    }

    .theme-label {
      color: currentColor;
      line-height: 1;
    }

    .icon-svg {
      width: 18px;
      height: 18px;
      stroke: currentColor;
      stroke-width: 2;
      fill: none;
      stroke-linecap: round;
      stroke-linejoin: round;
      flex-shrink: 0;
    }

    .theme-icon {
      display: none;
    }

    .shell {
      width: min(1320px, 94vw);
      margin: 0 auto;
      padding: 4.8rem 0 2.2rem;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 16px;
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(10px);
    }

    .masthead {
      margin-top: 1rem;
      padding: 1.2rem;
      position: relative;
      overflow: hidden;
    }

    .masthead::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(100deg, rgba(135, 26, 17, 0.17), rgba(10, 10, 54, 0.15), rgba(16, 185, 129, 0.09));
      pointer-events: none;
    }

    .masthead>* {
      position: relative;
      z-index: 1;
    }

    .brand-row {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .hero-content {
      max-width: 860px;
    }

    .eyebrow {
      margin: 0;
      font-size: 0.67rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: var(--brand-bright);
      font-weight: 700;
    }

    .hero-title {
      margin: 0.36rem 0 0;
      font-size: clamp(1.45rem, 3.4vw, 2.5rem);
      line-height: 1.12;
      letter-spacing: -0.02em;
    }

    .hero-copy {
      margin: 0.7rem 0 0;
      color: var(--muted);
      max-width: 70ch;
      font-size: 0.96rem;
    }

    .status-pills {
      margin-top: 1rem;
      display: flex;
      gap: 0.6rem;
      flex-wrap: wrap;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      border: 1px solid var(--line);
      padding: 0.33rem 0.64rem;
      border-radius: 999px;
      font-size: 0.68rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: var(--panel-soft);
      color: var(--muted);
      font-weight: 700;
    }

    .pill strong {
      color: var(--text);
      font-weight: 700;
    }

    .pulse-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--danger);
      position: relative;
      box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.65);
      animation: pulse-ring 1.7s ease-out infinite;
    }

    .action-strip {
      display: flex;
      gap: 0.6rem;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .action-btn {
      border: 1px solid var(--line-strong);
      background: var(--panel-soft);
      color: var(--text);
      padding: 0.58rem 0.85rem;
      border-radius: 10px;
      font-family: 'IBM Plex Mono', monospace;
      letter-spacing: 0.03em;
      font-size: 0.73rem;
      text-transform: uppercase;
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      cursor: pointer;
      transition: transform 180ms ease, border-color 180ms ease, background 180ms ease;
    }

    .action-btn:hover {
      border-color: rgba(197, 58, 47, 0.65);
      background: rgba(135, 26, 17, 0.17);
      transform: translateY(-1px);
    }

    .action-btn:active {
      transform: translateY(0);
    }

    .pulse-btn {
      gap: 0.52rem;
    }

    .heartbeat-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.42);
      animation: heartbeat-green 2.4s ease-in-out infinite;
      flex-shrink: 0;
    }

    .metrics-grid {
      margin-top: 1rem;
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 0.75rem;
    }

    .metric-card {
      padding: 0.9rem;
      border: 1px solid var(--line);
      border-radius: 14px;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.025), rgba(255, 255, 255, 0));
      min-height: 110px;
      position: relative;
      overflow: hidden;
    }

    .metric-card::after {
      content: '';
      position: absolute;
      inset: auto -60% -80% -60%;
      height: 110px;
      background: radial-gradient(circle, rgba(197, 58, 47, 0.22), transparent 65%);
      pointer-events: none;
      opacity: 0;
      transition: opacity 200ms ease;
    }

    .metric-card:hover::after {
      opacity: 1;
    }

    .metric-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 0.66rem;
      font-weight: 700;
    }

    .metric-val {
      margin-top: 0.55rem;
      font-family: 'IBM Plex Mono', monospace;
      font-size: clamp(1.05rem, 2.2vw, 1.6rem);
      color: var(--text);
      font-weight: 600;
    }

    .metric-sub {
      margin-top: 0.32rem;
      font-size: 0.75rem;
      color: var(--muted);
      line-height: 1.25;
    }

    .section {
      margin-top: 1rem;
      padding: 1rem;
    }

    .section-head {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0.8rem;
      flex-wrap: wrap;
      margin-bottom: 0.75rem;
    }

    .section-title {
      margin: 0;
      font-size: 1.1rem;
      letter-spacing: 0.01em;
    }

    .section-note {
      margin: 0.3rem 0 0;
      color: var(--muted);
      max-width: 68ch;
      font-size: 0.86rem;
    }

    .topology-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.9fr) minmax(290px, 1fr);
      gap: 0.8rem;
    }

    .map-panel,
    .detail-panel {
      border: 1px solid var(--line);
      border-radius: 14px;
      background: var(--panel-strong);
      overflow: hidden;
    }

    .map-toolbar {
      padding: 0.75rem;
      display: flex;
      gap: 0.5rem;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      border-bottom: 1px solid var(--line);
      background: rgba(255, 255, 255, 0.02);
    }

    .segmented {
      display: flex;
      flex-wrap: wrap;
      gap: 0.45rem;
    }

    .seg-btn {
      border: 1px solid var(--line);
      border-radius: 8px;
      padding: 0.4rem 0.58rem;
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: rgba(255, 255, 255, 0.02);
      color: var(--muted);
      cursor: pointer;
      transition: 180ms ease;
    }

    .seg-btn.active {
      color: #fff;
      border-color: rgba(197, 58, 47, 0.7);
      background: linear-gradient(125deg, rgba(135, 26, 17, 0.46), rgba(22, 19, 52, 0.62));
      box-shadow: 0 0 0 1px rgba(197, 58, 47, 0.32) inset;
    }

    body[data-theme='light'] .seg-btn.active {
      color: #ffffff;
    }

    .toggle-cluster {
      display: inline-flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .toggle {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.67rem;
      font-family: 'IBM Plex Mono', monospace;
      letter-spacing: 0.07em;
      text-transform: uppercase;
      color: var(--muted);
      border: 1px solid var(--line);
      border-radius: 8px;
      padding: 0.3rem 0.5rem;
      background: rgba(255, 255, 255, 0.02);
    }

    .toggle input {
      accent-color: var(--brand-bright);
      width: 14px;
      height: 14px;
      cursor: pointer;
    }

    .topology-grid {
      padding: 0.82rem;
      display: grid;
      gap: 0.62rem;
      position: relative;
      min-height: 540px;
    }

    .topology-grid::before {
      content: '';
      position: absolute;
      inset: 0.72rem 0.82rem;
      border-radius: 10px;
      border: 1px dashed rgba(96, 165, 250, 0.16);
      pointer-events: none;
      opacity: 0;
      transition: opacity 220ms ease;
    }

    .topology-grid.show-boundaries::before {
      opacity: 1;
    }

    .plane {
      border: 1px solid var(--line);
      border-radius: 11px;
      padding: 0.62rem;
      background: rgba(255, 255, 255, 0.02);
      position: relative;
      transition: border-color 180ms ease, box-shadow 180ms ease;
    }

    .plane:hover {
      border-color: var(--line-strong);
    }

    .plane::after {
      content: '';
      position: absolute;
      left: 14px;
      right: 14px;
      bottom: -0.35rem;
      height: 2px;
      background: linear-gradient(to right, transparent, rgba(96, 165, 250, 0.4), transparent);
      opacity: 0;
      pointer-events: none;
      transition: opacity 220ms ease;
      animation: scanline 2.8s linear infinite;
    }

    .flow-paused .plane::after {
      animation-play-state: paused;
      opacity: 0;
    }

    .flow-active .plane::after {
      opacity: 0.85;
    }

    .plane[data-plane='ui'] {
      box-shadow: inset 0 0 0 1px rgba(96, 165, 250, 0.22);
    }

    .plane[data-plane='data'] {
      box-shadow: inset 0 0 0 1px rgba(245, 158, 11, 0.2);
    }

    .plane[data-plane='reachability'] {
      box-shadow: inset 0 0 0 1px rgba(16, 185, 129, 0.2);
    }

    .plane[data-plane='intelligence'] {
      box-shadow: inset 0 0 0 1px rgba(197, 58, 47, 0.22);
    }

    .plane[data-plane='server'] {
      box-shadow: inset 0 0 0 1px rgba(129, 140, 248, 0.22);
    }

    .flow-arrow {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 0.35rem 0;
      gap: 0.25rem;
      opacity: 0.85;
      animation: pulse-arrow 2.5s infinite ease-in-out;
    }

    .flow-arrow i {
      width: 20px;
      height: 20px;
      stroke-width: 2.5;
    }

    .flow-arrow span {
      font-size: 0.72rem;
      font-style: italic;
      letter-spacing: 0.03em;
      text-align: center;
      opacity: 0.9;
    }

    .flow-arrow.ingress-to-orch {
      color: var(--info);
    }

    .flow-arrow.orch-to-data {
      color: var(--warn);
    }

    .flow-arrow.data-to-logic {
      color: var(--good);
    }

    .flow-paused .flow-arrow {
      animation-play-state: paused;
      opacity: 0.4;
    }

    @keyframes pulse-arrow {

      0%,
      100% {
        transform: translateY(0);
        opacity: 0.6;
      }

      50% {
        transform: translateY(4px);
        opacity: 1;
      }
    }

    .plane-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.35rem;
      margin-bottom: 0.5rem;
    }

    .plane-title {
      margin: 0;
      font-size: 0.72rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--muted);
      font-weight: 700;
    }

    .plane-boundary {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.61rem;
      color: var(--muted);
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 0.16rem 0.45rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      background: rgba(255, 255, 255, 0.03);
    }

    .node-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.5rem;
    }

    .node-grid.two-col {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .node {
      border: 1px solid var(--line);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.02);
      color: var(--text);
      text-align: left;
      padding: 0.56rem;
      cursor: pointer;
      transition: transform 160ms ease, border-color 160ms ease, background 160ms ease, opacity 180ms ease;
      min-height: 86px;
      display: flex;
      flex-direction: column;
      gap: 0.24rem;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .node::after {
      content: '';
      position: absolute;
      inset: auto -35% -70% -35%;
      height: 90px;
      background: radial-gradient(circle, rgba(96, 165, 250, 0.22), transparent 68%);
      opacity: 0;
      transition: opacity 160ms ease;
      pointer-events: none;
    }

    .node:hover {
      transform: translateY(-2px);
      border-color: var(--line-strong);
      background: rgba(255, 255, 255, 0.05);
    }

    .node:hover::after,
    .node.active::after {
      opacity: 1;
    }

    .node.active {
      border-color: rgba(197, 58, 47, 0.72);
      background: rgba(135, 26, 17, 0.2);
      box-shadow: 0 0 0 1px rgba(197, 58, 47, 0.33) inset;
    }

    .node.is-muted {
      opacity: 0.24;
      transform: none;
      pointer-events: none;
    }

    .node.flash {
      animation: incident-flash 1.1s ease-out;
    }

    .node-main {
      font-size: 0.82rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .node-sub {
      font-size: 0.68rem;
      color: var(--muted);
      line-height: 1.25;
    }

    .node-meta {
      margin-top: 0.2rem;
      font-size: 0.61rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      font-family: 'IBM Plex Mono', monospace;
      color: var(--muted);
    }

    .node-icon,
    .metric-icon {
      width: 16px;
      height: 16px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: var(--info);
      flex-shrink: 0;
    }

    .line-icon {
      width: 16px;
      height: 16px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: currentColor;
      flex-shrink: 0;
    }

    .detail-panel {
      display: flex;
      flex-direction: column;
    }

    .detail-head {
      padding: 0.78rem;
      border-bottom: 1px solid var(--line);
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
      align-items: center;
      background: rgba(255, 255, 255, 0.03);
    }

    .detail-title {
      margin: 0;
      font-size: 0.92rem;
      font-weight: 700;
    }

    .detail-body {
      padding: 0.8rem;
      overflow: auto;
      min-height: 440px;
      max-height: 560px;
      display: grid;
      gap: 0.65rem;
      align-content: start;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
    }

    .chip {
      border-radius: 999px;
      border: 1px solid var(--line);
      padding: 0.21rem 0.52rem;
      font-size: 0.62rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      font-family: 'IBM Plex Mono', monospace;
      color: var(--muted);
      background: rgba(255, 255, 255, 0.03);
    }

    .detail-copy {
      margin: 0;
      color: var(--muted);
      font-size: 0.82rem;
      line-height: 1.42;
    }

    .detail-list {
      margin: 0;
      padding: 0;
      list-style: none;
      display: grid;
      gap: 0.45rem;
    }

    .detail-list li {
      padding: 0.45rem 0.55rem;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: rgba(255, 255, 255, 0.02);
      font-size: 0.76rem;
      color: var(--text);
      line-height: 1.35;
    }

    .detail-list li span {
      color: var(--muted);
      display: block;
      margin-top: 0.15rem;
      font-size: 0.71rem;
    }

    .detail-actions {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .ghost-btn {
      border: 1px solid var(--line);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text);
      border-radius: 8px;
      padding: 0.42rem 0.56rem;
      font-size: 0.68rem;
      font-family: 'IBM Plex Mono', monospace;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      cursor: pointer;
      transition: 160ms ease;
      display: inline-flex;
      align-items: center;
      gap: 0.38rem;
    }

    .ghost-btn:hover {
      border-color: rgba(197, 58, 47, 0.62);
      background: rgba(135, 26, 17, 0.18);
    }

    .insight-grid {
      margin-top: 1rem;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.75rem;
    }

    .insight-card {
      padding: 0.85rem;
      border: 1px solid var(--line);
      border-radius: 14px;
      background: var(--panel-strong);
      display: grid;
      gap: 0.7rem;
      align-content: start;
    }

    .insight-title {
      margin: 0;
      font-size: 0.81rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
    }

    .bar-stack {
      display: grid;
      gap: 0.46rem;
    }

    .bar-row {
      display: grid;
      gap: 0.22rem;
    }

    .bar-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.71rem;
      color: var(--muted);
      gap: 0.5rem;
    }

    .bar-rail {
      height: 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid var(--line);
      overflow: hidden;
      position: relative;
    }

    .bar-fill {
      position: absolute;
      inset: 0 auto 0 0;
      width: 0;
      border-radius: inherit;
      background: linear-gradient(120deg, rgba(96, 165, 250, 0.88), rgba(37, 99, 235, 0.88));
      transition: width 850ms cubic-bezier(0.2, 0.85, 0.2, 1);
    }

    .bar-fill.warn {
      background: linear-gradient(120deg, rgba(245, 158, 11, 0.93), rgba(217, 119, 6, 0.85));
    }

    .bar-fill.good {
      background: linear-gradient(120deg, rgba(16, 185, 129, 0.9), rgba(5, 150, 105, 0.82));
    }

    .rings {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.5rem;
    }

    .ring-item {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 0.5rem;
      text-align: center;
      background: rgba(255, 255, 255, 0.02);
    }

    .ring {
      --pct: 0;
      width: 74px;
      height: 74px;
      border-radius: 999px;
      margin: 0 auto 0.38rem;
      background: conic-gradient(var(--brand-bright) calc(var(--pct) * 1%), rgba(255, 255, 255, 0.1) 0);
      display: grid;
      place-items: center;
      position: relative;
      transition: filter 180ms ease;
    }

    .ring::after {
      content: '';
      width: 52px;
      height: 52px;
      border-radius: 999px;
      background: var(--panel-strong);
      border: 1px solid var(--line);
      position: absolute;
    }

    .ring strong {
      position: relative;
      z-index: 1;
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.82rem;
      font-weight: 600;
    }

    .ring-item p {
      margin: 0;
      color: var(--muted);
      font-size: 0.66rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .log-stream {
      display: grid;
      gap: 0.45rem;
      max-height: 250px;
      overflow: auto;
      padding-right: 0.2rem;
    }

    .log-item {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 0.55rem;
      background: rgba(255, 255, 255, 0.02);
      text-align: left;
      color: var(--text);
      display: grid;
      gap: 0.25rem;
      cursor: pointer;
      transition: border-color 150ms ease, background 150ms ease;
    }

    .log-item:hover {
      border-color: var(--line-strong);
      background: rgba(255, 255, 255, 0.05);
    }

    .log-line {
      display: flex;
      justify-content: space-between;
      gap: 0.4rem;
      align-items: center;
      font-size: 0.73rem;
      font-weight: 600;
    }

    .log-time {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.65rem;
      color: var(--muted);
    }

    .sev {
      border-radius: 999px;
      padding: 0.14rem 0.44rem;
      font-size: 0.57rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-family: 'IBM Plex Mono', monospace;
      border: 1px solid transparent;
    }

    .sev.info {
      color: var(--info);
      border-color: rgba(96, 165, 250, 0.32);
      background: rgba(96, 165, 250, 0.12);
    }

    .sev.warn {
      color: var(--warn);
      border-color: rgba(245, 158, 11, 0.34);
      background: rgba(245, 158, 11, 0.14);
    }

    .sev.high {
      color: var(--danger);
      border-color: rgba(239, 68, 68, 0.36);
      background: rgba(239, 68, 68, 0.14);
    }

    .log-copy {
      color: var(--muted);
      font-size: 0.72rem;
      line-height: 1.32;
    }

    .contracts {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.5rem;
    }

    .contract {
      border: 1px solid var(--line);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.02);
      padding: 0.6rem;
      display: grid;
      gap: 0.34rem;
      cursor: pointer;
      transition: transform 150ms ease, border-color 150ms ease, background 150ms ease;
    }

    .contract:hover {
      transform: translateY(-2px);
      border-color: rgba(197, 58, 47, 0.62);
      background: rgba(135, 26, 17, 0.16);
    }

    .contract h4 {
      margin: 0;
      font-size: 0.78rem;
    }

    .contract p {
      margin: 0;
      font-size: 0.69rem;
      color: var(--muted);
      line-height: 1.32;
    }

    .footer {
      margin-top: 1rem;
      border: 1px solid var(--line);
      border-radius: 12px;
      background: var(--panel);
      padding: 0.72rem 0.85rem;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.5rem;
      font-size: 0.68rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--muted);
      font-family: 'IBM Plex Mono', monospace;
    }

    .reveal {
      opacity: 0;
      transform: translateY(12px) scale(0.99);
      transition: opacity 520ms ease, transform 520ms ease;
    }

    .reveal.is-visible {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(1, 4, 12, 0.7);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 40;
      padding: 1rem;
    }

    .modal.open {
      display: flex;
    }

    .modal-card {
      width: min(780px, 96vw);
      max-height: 86vh;
      overflow: auto;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: var(--panel-strong);
      box-shadow: var(--shadow-strong);
      padding: 0.9rem;
      display: grid;
      gap: 0.72rem;
    }

    .modal-head {
      display: flex;
      justify-content: space-between;
      gap: 0.6rem;
      align-items: flex-start;
    }

    .modal-title {
      margin: 0;
      font-size: 1.02rem;
      line-height: 1.22;
    }

    .modal-sub {
      margin: 0.25rem 0 0;
      color: var(--muted);
      font-size: 0.82rem;
    }

    .icon-btn {
      border: 1px solid var(--line);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text);
      border-radius: 8px;
      width: 34px;
      height: 34px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .modal-grid {
      display: grid;
      gap: 0.6rem;
    }

    .modal-block {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 0.66rem;
      background: rgba(255, 255, 255, 0.02);
    }

    .modal-block h5 {
      margin: 0 0 0.35rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 0.67rem;
      color: var(--muted);
    }

    .modal-block ul {
      margin: 0;
      padding-left: 1.05rem;
      color: var(--text);
      font-size: 0.8rem;
      line-height: 1.35;
      display: grid;
      gap: 0.3rem;
    }

    body.modal-open {
      overflow: hidden;
    }

    @keyframes pulse-ring {
      0% {
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.55);
      }

      80% {
        box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
      }
    }

    @keyframes scanline {
      0% {
        transform: translateX(-25%);
      }

      100% {
        transform: translateX(25%);
      }
    }

    @keyframes incident-flash {
      0% {
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.65);
      }

      100% {
        box-shadow: 0 0 0 12px rgba(239, 68, 68, 0);
      }
    }

    @keyframes heartbeat-green {
      0% {
        transform: scale(0.92);
        box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.46);
      }

      35% {
        transform: scale(1);
        box-shadow: 0 0 0 8px rgba(34, 197, 94, 0.06);
      }

      70% {
        transform: scale(0.95);
        box-shadow: 0 0 0 14px rgba(34, 197, 94, 0);
      }

      100% {
        transform: scale(0.92);
        box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
      }
    }

    @media (max-width: 1160px) {
      .topology-layout {
        grid-template-columns: 1fr;
      }

      .detail-body {
        min-height: 0;
        max-height: none;
      }
    }

    @media (max-width: 980px) {
      .metrics-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .insight-grid {
        grid-template-columns: 1fr;
      }

      .contracts {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .node-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .node-grid.two-col {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 640px) {
      .shell {
        width: min(1320px, 96vw);
        padding-top: 4.4rem;
      }

      .masthead,
      .section {
        padding: 0.8rem;
      }

      .app-topnav-inner {
        width: 100%;
        padding: 0 0.75rem;
      }

      .metrics-grid {
        grid-template-columns: 1fr;
      }

      .node-grid,
      .node-grid.two-col,
      .contracts,
      .rings {
        grid-template-columns: 1fr;
      }

      .action-strip {
        justify-content: flex-start;
      }

      .topology-grid {
        min-height: 0;
      }
    }
  </style>
</head>

<body data-theme="dark">

  <header class="app-topnav">
    <div class="app-topnav-inner">
      <a href="#" class="app-brand" aria-label="Go to Home">
        <img src="ARGUS_Logo.png" alt="Argonaut logo" />
        <span>ARGONAUT</span>
      </a>
      <nav class="app-nav-links"
        style="display: flex; gap: 0.8rem; align-items: center; margin-left: auto; margin-right: 1.5rem;">
        <a href="index.html" class="action-btn"
          style="padding: 0.4rem 0.75rem; font-size: 0.68rem; background: rgba(0,0,0,0.2);"><i
            data-lucide="layout-template" class="line-icon" style="width: 14px; height: 14px;"></i> ARCHITECTURE</a>
        <a href="why.html" class="action-btn"
          style="padding: 0.4rem 0.75rem; font-size: 0.68rem; background: rgba(0,0,0,0.2);"><i data-lucide="help-circle"
            class="line-icon" style="width: 14px; height: 14px;"></i> WHY ARGONAUT</a>
        <a href="journey.html" class="action-btn"
          style="padding: 0.4rem 0.75rem; font-size: 0.68rem; background: rgba(0,0,0,0.2);"><i data-lucide="map"
            class="line-icon" style="width: 14px; height: 14px;"></i> USER JOURNEY</a>
      </nav>
      <div class="app-nav-actions">
        <button class="theme-capsule" id="navThemeToggle" type="button" title="Toggle theme" aria-label="Toggle theme">
          <svg class="icon-svg theme-icon" id="themeSun" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="4"></circle>
            <path d="M12 2v2"></path>
            <path d="M12 20v2"></path>
            <path d="m4.93 4.93 1.41 1.41"></path>
            <path d="m17.66 17.66 1.41 1.41"></path>
            <path d="M2 12h2"></path>
            <path d="M20 12h2"></path>
            <path d="m6.34 17.66-1.41 1.41"></path>
            <path d="m19.07 4.93-1.41 1.41"></path>
          </svg>
          <svg class="icon-svg theme-icon" id="themeMoon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 3a7.5 7.5 0 1 0 9 9A9 9 0 1 1 12 3"></path>
          </svg>
          <span class="theme-label" id="themeLabel">DARK</span>
        </button>
      </div>
    </div>
  </header>

  <div class="shell">
    <header class="masthead panel reveal">
      <div class="brand-row">
        <div class="hero-content">
          <p class="eyebrow">Architecture Command Deck</p>
          <h1 class="hero-title">Argonaut System Visualization</h1>
          <p class="hero-copy">
            A real-time visualization of the Argonaut multi-agent security triage factory. Illustrates the flow from
            alerts through LangChain-orchestrated agents, utilizing Elastic for deterministic state.
          </p>
          <div class="status-pills">
            <span class="pill"><span class="pulse-dot"></span><strong>Live Workflows</strong></span>
            <span class="pill"><strong>Agent Pool:</strong>&nbsp;Active</span>
            <span class="pill"><strong>ES|QL Pipeline:</strong>&nbsp;Healthy</span>
            <span class="pill"><strong>Argus Engine:</strong>&nbsp;Linked</span>
          </div>
        </div>
        <div class="action-strip">
          <button class="action-btn pulse-btn" id="pulseRun" type="button">
            <span class="heartbeat-dot" aria-hidden="true"></span>
            Run System Pulse
          </button>
        </div>
      </div>

      <div class="metrics-grid">
        <article class="metric-card">
          <div class="metric-top"><span>Active Workflows</span><span class="metric-icon"><i
                data-lucide="activity"></i></span></div>
          <div class="metric-val" data-counter="212">0</div>
          <p class="metric-sub">Concurrent multi-agent triage processes orchestrated by Supervisor.</p>
        </article>
        <article class="metric-card">
          <div class="metric-top"><span>Findings Triaged</span><span class="metric-icon"><i
                data-lucide="shield-alert"></i></span></div>
          <div class="metric-val" data-counter="4502">0</div>
          <p class="metric-sub">Total findings parsed and scored via ES|QL in the current epoch.</p>
        </article>
        <article class="metric-card">
          <div class="metric-top"><span>Avg Resolution Time</span><span class="metric-icon"><i
                data-lucide="timer"></i></span></div>
          <div class="metric-val" data-counter="1.4" data-suffix="s">0s</div>
          <p class="metric-sub">End-to-end latency from ingress to Jira ticket generation.</p>
        </article>
        <article class="metric-card">
          <div class="metric-top"><span>Automation Rate</span><span class="metric-icon"><i
                data-lucide="check-circle-2"></i></span></div>
          <div class="metric-val" data-counter="94" data-suffix="%">0%</div>
          <p class="metric-sub">Percentage of alerts resolved without human intervention.</p>
        </article>
      </div>
    </header>

    <section class="section panel reveal">
      <div class="section-head">
        <div>
          <h2 class="section-title">Interactive Architecture Topology</h2>
          <p class="section-note">Click any component node to inspect responsibilities and system bounds. Use filters to
            isolate execution planes.</p>
        </div>
      </div>

      <div class="topology-layout">
        <article class="map-panel">
          <div class="map-toolbar">
            <div class="segmented" id="planeFilters">
              <button class="seg-btn active" data-filter="all" type="button">All</button>
              <button class="seg-btn" data-filter="ingress" type="button">Ingress</button>
              <button class="seg-btn" data-filter="orchestration" type="button">Orchestration</button>
              <button class="seg-btn" data-filter="data" type="button">Data & State</button>
              <button class="seg-btn" data-filter="logic" type="button">Core Logic</button>
            </div>
            <div class="toggle-cluster">
              <label class="toggle"><input id="flowToggle" type="checkbox" checked />Activity Rails</label>
            </div>
          </div>

          <div class="topology-grid flow-active" id="topologyGrid">
            <section class="plane" data-plane="ingress">
              <div class="plane-head">
                <h3 class="plane-title">Ingress Plane</h3><span class="plane-boundary">External Services</span>
              </div>
              <div class="node-grid">
                <button class="node" data-node="security-alerts" data-plane="ingress" type="button"><span
                    class="node-main"><img src="https://cdn.simpleicons.org/pagerduty/FFF" width="14" height="14"
                      alt="PagerDuty" />Security Alerts</span><span class="node-sub">Real-time webhooks.</span><span
                    class="node-meta">PagerDuty / DD</span></button>
                <button class="node" data-node="appsec-scans" data-plane="ingress" type="button"><span
                    class="node-main"><img src="https://cdn.simpleicons.org/snyk/FFF" width="14" height="14"
                      alt="Snyk" />AppSec Scans</span><span class="node-sub">Batch report intake.</span><span
                    class="node-meta">Snyk / Veracode</span></button>
              </div>
            </section>
            <div class="flow-arrow ingress-to-orch">
              <i data-lucide="arrow-down"></i>
              <span>Alerts & telemetry trigger agent workflows</span>
            </div>
            <section class="plane" data-plane="orchestration">
              <div class="plane-head">
                <h3 class="plane-title">Agent Orchestration Plane</h3><span class="plane-boundary">LangChain</span>
              </div>
              <div class="node-grid">
                <button class="node" data-node="supervisor-agent" data-plane="orchestration" type="button"><span
                    class="node-main"><img src="ARGUS_Logo.png" width="14" height="14" alt="Argonaut"
                      style="filter: brightness(0) invert(1);" />Supervisor Agent</span><span class="node-sub">Cognitive
                    routing.</span><span class="node-meta">Router</span></button>
                <button class="node" data-node="triage-agent" data-plane="orchestration" type="button"><span
                    class="node-main"><img src="ARGUS_Logo.png" width="14" height="14" alt="Argonaut"
                      style="filter: brightness(0) invert(1);" />Triage Agent</span><span class="node-sub">Formats raw
                    input.</span><span class="node-meta">Worker</span></button>
                <button class="node" data-node="enrichment-agent" data-plane="orchestration" type="button"><span
                    class="node-main"><img src="ARGUS_Logo.png" width="14" height="14" alt="Argonaut"
                      style="filter: brightness(0) invert(1);" />Enrichment Agent</span><span class="node-sub">Gathers
                    TI & paths.</span><span class="node-meta">Worker</span></button>
                <button class="node" data-node="action-agent" data-plane="orchestration" type="button"><span
                    class="node-main"><img src="https://cdn.simpleicons.org/slack/FFF" width="14" height="14"
                      alt="Slack" />Action Agent</span><span class="node-sub">Generates tickets.</span><span
                    class="node-meta">Worker</span></button>
              </div>
            </section>
            <div class="flow-arrow orch-to-data">
              <i data-lucide="arrow-down"></i>
              <span>Agent state & scoring persisted deterministically</span>
            </div>
            <section class="plane" data-plane="data">
              <div class="plane-head">
                <h3 class="plane-title">Data & State Plane</h3><span class="plane-boundary">Elastic Agent Builder</span>
              </div>
              <div class="node-grid two-col">
                <button class="node" data-node="es-state-index" data-plane="data" type="button"><span
                    class="node-main"><img src="https://cdn.simpleicons.org/elasticsearch/FFF" width="14" height="14"
                      alt="Elastic" />State Index</span><span class="node-sub">Workflow memory.</span><span
                    class="node-meta">argonaut_state</span></button>
                <button class="node" data-node="esql-pipeline" data-plane="data" type="button"><span
                    class="node-main"><img src="https://cdn.simpleicons.org/kibana/FFF" width="14" height="14"
                      alt="Kibana" />ES|QL Pipeline</span><span class="node-sub">Fix Priority Score.</span><span
                    class="node-meta">In-Database</span></button>
              </div>
            </section>
            <div class="flow-arrow data-to-logic">
              <i data-lucide="arrow-down"></i>
              <span>Data models invoke core Argus parsing & paths</span>
            </div>
            <section class="plane" data-plane="logic">
              <div class="plane-head">
                <h3 class="plane-title">Core Logic Plane</h3><span class="plane-boundary">Argus Reuse</span>
              </div>
              <div class="node-grid two-col">
                <button class="node" data-node="parse-engine" data-plane="logic" type="button"><span
                    class="node-main"><img src="ARGUS_Logo.png" width="14" height="14" alt="Argonaut"
                      style="filter: brightness(0) invert(1);" />Parse Engine</span><span class="node-sub">Normalized
                    schemas.</span><span class="node-meta">@argus_core</span></button>
                <button class="node" data-node="reachability-builder" data-plane="logic" type="button"><span
                    class="node-main"><img src="ARGUS_Logo.png" width="14" height="14" alt="Argonaut"
                      style="filter: brightness(0) invert(1);" />Reachability Builder</span><span
                    class="node-sub">Lockfile graph
                    trees.</span><span class="node-meta">@argus_core</span></button>
              </div>
            </section>
          </div>
        </article>

        <aside class="detail-panel">
          <div class="detail-head">
            <h3 class="detail-title" id="detailTitle">Supervisor Agent</h3>
            <span class="chip" id="detailPlane">Orchestration Plane</span>
          </div>
          <div class="detail-body">
            <div class="chip-row" id="detailTags"></div>
            <p class="detail-copy" id="detailSummary"></p>
            <ul class="detail-list" id="detailResponsibilities"></ul>
            <div class="detail-actions">
              <button class="ghost-btn" id="openDetailModal" type="button"><i data-lucide="expand"
                  class="line-icon"></i>Open Full Spec</button>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <section class="insight-grid reveal">
      <article class="insight-card">
        <h3 class="insight-title"><i data-lucide="bar-chart-3" class="line-icon"></i>Agent Workflow Latency</h3>
        <div class="bar-stack">
          <div class="bar-row">
            <div class="bar-label"><span>Initial Fetch & Parse</span><strong id="latencyLocalText">120ms</strong></div>
            <div class="bar-rail"><span class="bar-fill good" id="latencyLocal" data-width="12"></span></div>
          </div>
          <div class="bar-row">
            <div class="bar-label"><span>Threat Intel & Reachability</span><strong id="latencyCloudText">680ms</strong>
            </div>
            <div class="bar-rail"><span class="bar-fill warn" id="latencyCloud" data-width="68"></span></div>
          </div>
          <div class="bar-row">
            <div class="bar-label"><span>Ticket Generation & Routing</span><strong id="latencyAiText">450ms</strong>
            </div>
            <div class="bar-rail"><span class="bar-fill" id="latencyAi" data-width="45"></span></div>
          </div>
        </div>
      </article>

      <article class="insight-card">
        <h3 class="insight-title"><i data-lucide="target" class="line-icon"></i>System Confidence Rings</h3>
        <div class="rings">
          <div class="ring-item">
            <div class="ring" data-ring="98"><strong>98%</strong></div>
            <p>Threat Evidence</p>
          </div>
          <div class="ring-item">
            <div class="ring" data-ring="92"><strong>92%</strong></div>
            <p>Path Validation</p>
          </div>
          <div class="ring-item">
            <div class="ring" data-ring="87"><strong>87%</strong></div>
            <p>Suggested Fix</p>
          </div>
        </div>
      </article>

      <article class="insight-card">
        <h3 class="insight-title"><i data-lucide="terminal" class="line-icon"></i>Multi-Agent Event Stream</h3>
        <div id="eventFeed" class="log-stream" aria-live="polite"></div>
        <button class="ghost-btn" id="simulateIncident" type="button"><i data-lucide="zap" class="line-icon"></i>Trigger
          Webhook Spike</button>
      </article>
    </section>

    <section class="section panel reveal">
      <div class="section-head">
        <div>
          <h2 class="section-title">Core Operating Contracts</h2>
          <p class="section-note">Each contract below powers deterministic behavior in Argonaut. Click a contract card
            to inspect design intent.</p>
        </div>
      </div>
      <div class="contracts">
        <article class="contract" data-contract="state" tabindex="0" role="button">
          <h4>State Index</h4>
          <p>Index: <code>argonaut_state</code>. Maintains rigorous tracking of multi-agent workflows and checkpointing.
          </p>
        </article>
        <article class="contract" data-contract="scoring" tabindex="0" role="button">
          <h4>ES|QL Scoring Model</h4>
          <p>Mathematical representation of risk executed natively on Elasticsearch nodes for sub-second ranking.</p>
        </article>
        <article class="contract" data-contract="prompts" tabindex="0" role="button">
          <h4>System Prompts</h4>
          <p>Strict LLM boundaries ensuring structured JSON outputs and preventing hallucination.</p>
        </article>
      </div>
    </section>

    <footer class="footer reveal">
      <span>Argonaut Architecture Deck</span>
      <span>Powered by Elastic Agent Builder</span>
      <span>CONFIDENTIAL</span>
    </footer>
  </div>

  <div class="modal" id="insightModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-card">
      <div class="modal-head">
        <div>
          <h3 class="modal-title" id="modalTitle">Detail</h3>
          <p class="modal-sub" id="modalSubtitle"></p>
        </div>
        <button class="icon-btn" id="modalClose" type="button" aria-label="Close details"><i data-lucide="x"
            class="line-icon"></i></button>
      </div>
      <div class="chip-row" id="modalTags"></div>
      <div class="modal-grid">
        <section class="modal-block">
          <h5>Responsibilities</h5>
          <ul id="modalResponsibilities"></ul>
        </section>
        <section class="modal-block">
          <h5>Architecture Notes</h5>
          <ul id="modalNotes"></ul>
        </section>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/lucide@0.469.0/dist/umd/lucide.js"></script>
  <script>
    const nodeSpecs = {
      'security-alerts': {
        title: 'Security Alerts (Ingress)', plane: 'External Clients', tags: ['PagerDuty', 'Datadog', 'Webhooks'],
        summary: 'Receives real-time security alerts and pushes them to the Triage Agent to initiate workflows.',
        responsibilities: [{ title: 'Payload Reception', detail: 'Accepts diverse alert formats.' }, { title: 'Queue Initialization', detail: 'Triggers the main Supervisor event loop.' }],
        notes: ['Webhook-first approach for the hackathon.']
      },
      'appsec-scans': {
        title: 'AppSec Scans (Ingress)', plane: 'External Clients', tags: ['Snyk', 'Veracode', 'SARIF'],
        summary: 'Ingests periodic vulnerability scan reports for batch triage processing.',
        responsibilities: [{ title: 'Batch Intake', detail: 'Processes large static/dynamic analysis reports.' }],
        notes: ['Relies on the Parse Engine for normalization.']
      },
      'supervisor-agent': {
        title: 'Supervisor Agent', plane: 'Agent Orchestration', tags: ['LangChain', 'Router', 'Memory'],
        summary: 'The central brain of the multi-agent system. Analyzes the current state and routes tasks to specialized worker agents.',
        responsibilities: [{ title: 'Workflow Routing', detail: 'Determines the next required action (Triage -> Enrich -> Action).' }, { title: 'State Tracking', detail: 'Maintains conversational and workflow memory in Elasticsearch.' }],
        notes: ['Built on LangChain for cognitive routing.']
      },
      'triage-agent': {
        title: 'Triage Agent', plane: 'Agent Orchestration', tags: ['Parser', 'Normalization'],
        summary: 'Accepts raw alerts, delegates parsing to Argus core logic, and pushes normalized findings to the State Index.',
        responsibilities: [{ title: 'Initial Analysis', detail: 'Classifies the incoming alert type.' }, { title: 'Normalization', detail: 'Uses Argus Core to create UniversalFindings.' }],
        notes: []
      },
      'enrichment-agent': {
        title: 'Enrichment Agent', plane: 'Agent Orchestration', tags: ['EPSS', 'KEV', 'Context'],
        summary: 'Augments findings with Threat Intel and reachability path data to build deep context.',
        responsibilities: [{ title: 'Threat Feed Queries', detail: 'Fetches EPSS scores and KEV status via Elastic tools.' }, { title: 'Reachability Links', detail: 'Connects findings to dependency trees.' }],
        notes: ['Critical for the ES|QL Priority Score generation.']
      },
      'action-agent': {
        title: 'Action Agent', plane: 'Agent Orchestration', tags: ['Jira', 'Slack', 'Summary'],
        summary: 'Executes final triage decisions by generating summaries and pushing tickets to external systems.',
        responsibilities: [{ title: 'Ticket Generation', detail: 'Creates Jira issues with AI-generated context.' }, { title: 'Notifications', detail: 'Sends Slack alerts for high-priority items.' }],
        notes: ['Final step before the workflow is marked complete.']
      },
      'es-state-index': {
        title: 'State Index', plane: 'Data & State', tags: ['Elastic', 'Persistence', 'argonaut_state'],
        summary: 'The deterministic source of truth for all workflows, agent memories, and finding objects.',
        responsibilities: [{ title: 'Durability', detail: 'Stores the canonical state across agent steps.' }, { title: 'Audit Trail', detail: 'Logs all multi-agent transitions.' }],
        notes: ['Powered by Elastic Agent Builder.']
      },
      'esql-pipeline': {
        title: 'ES|QL Pipeline', plane: 'Data & State', tags: ['Scoring', 'Ranking', 'ES|QL'],
        summary: 'Calculates dynamic Fix Priority Scores directly in the data plane for ultra-fast ranking.',
        responsibilities: [{ title: 'Risk Calculation', detail: 'Combines CVSS, EPSS, and reachability mathematically.' }, { title: 'Triage Sorting', detail: 'Provides the exact order of importance for the Action Agent.' }],
        notes: ['Massively reduces logic overhead in the application code.']
      },
      'parse-engine': {
        title: 'Parse Engine', plane: 'Core Logic', tags: ['SARIF', 'JSON', 'Reuse'],
        summary: 'Reused logic from the Argus project to robustly parse vulnerability reports.',
        responsibilities: [{ title: 'Format Adaptation', detail: 'Handles multiple scanner outputs.' }],
        notes: ['Keeps Argonaut focused on orchestration, not parsing.']
      },
      'reachability-builder': {
        title: 'Reachability Builder', plane: 'Core Logic', tags: ['Dependency Graph', 'Paths', 'Reuse'],
        summary: 'Reused Argus engine that processes lockfiles to build deterministic dependency paths.',
        responsibilities: [{ title: 'Path Extraction', detail: 'Determines how vulnerable code is invoked in the codebase.' }],
        notes: ['Essential for accurate downstream context generation.']
      }
    };

    const contractSpecs = {
      state: {
        title: 'State Index Contract', subtitle: 'Elasticsearch document structure for workflows.', tags: ['Index: argonaut_state', 'PK: workflow_id'],
        responsibilities: ['Stores agent memory and intermediate step outputs.', 'Maintains the overall status of the triage lifecycle.', 'Acts as the checkpointing mechanism for LangGraph/Supervisor.'],
        notes: ['Changes are append-only or versioned for strict auditing.']
      },
      scoring: {
        title: 'ES|QL Scoring Model', subtitle: 'The mathematical equation for priority.', tags: ['Query', 'Dynamic Field', 'Risk'],
        responsibilities: ['Normalizes disparate risk factors (CVSS, EPSS, Reachability).', 'Calculates the final Fix Priority Score in milliseconds.', 'Allows dynamic re-weighting without reindexing.'],
        notes: ['Executed natively on the Elasticsearch data nodes.']
      },
      prompts: {
        title: 'System Prompt Contracts', subtitle: 'Agent instruction bounds and safeguards.', tags: ['LLM', 'Context Window', 'Formatting'],
        responsibilities: ['Defines the specialized role of each sub-agent.', 'Enforces strict JSON schema outputs from the models.', 'Prevents hallucination by constraining to provided state data.'],
        notes: ['Version controlled alongside application code.']
      }
    };

    const eventStore = [
      { id: 'evt-2001', severity: 'info', title: 'New PagerDuty Alert Received', detail: 'Alert ID PD-491 received; Supervisor Agent triggered to initialize triage workflow.', time: '14:22:11' },
      { id: 'evt-2002', severity: 'warn', title: 'EPSS Enrichment Delayed', detail: 'Threat Intel feed latency > 300ms; caching fallback applied for finding correlation.', time: '14:23:08' },
      { id: 'evt-2003', severity: 'info', title: 'ES|QL Score Calculated', detail: 'Priority score updated to 94.2 based on critical reachability path and high EPSS.', time: '14:24:02' },
      { id: 'evt-2004', severity: 'high', title: 'Jira Issue Escalation', detail: 'Action Agent created high priority Jira ticket PROJ-8422 due to immediate risk profile.', time: '14:25:29' }
    ];

    const detailTitle = document.getElementById('detailTitle');
    const detailPlane = document.getElementById('detailPlane');
    const detailTags = document.getElementById('detailTags');
    const detailSummary = document.getElementById('detailSummary');
    const detailResponsibilities = document.getElementById('detailResponsibilities');
    const eventFeed = document.getElementById('eventFeed');
    const modal = document.getElementById('insightModal');
    const modalClose = document.getElementById('modalClose');
    const modalTitle = document.getElementById('modalTitle');
    const modalSubtitle = document.getElementById('modalSubtitle');
    const modalTags = document.getElementById('modalTags');
    const modalResponsibilities = document.getElementById('modalResponsibilities');
    const modalNotes = document.getElementById('modalNotes');
    let activeNodeId = 'supervisor-agent';

    function renderDetail(nodeId) {
      const spec = nodeSpecs[nodeId]; if (!spec) return; activeNodeId = nodeId;
      detailTitle.textContent = spec.title; detailPlane.textContent = spec.plane; detailSummary.textContent = spec.summary;
      detailTags.innerHTML = spec.tags.map(tag => `<span class="chip">${tag}</span>`).join('');
      detailResponsibilities.innerHTML = spec.responsibilities.map(item => `<li>${item.title}<span>${item.detail}</span></li>`).join('');
      document.querySelectorAll('.node').forEach(node => { node.classList.toggle('active', node.dataset.node === nodeId); });
      if (window.lucide) window.lucide.createIcons();
    }

    function openModal(spec) {
      modalTitle.textContent = spec.title; modalSubtitle.textContent = spec.summary || spec.subtitle || '';
      modalTags.innerHTML = (spec.tags || []).map(tag => `<span class="chip">${tag}</span>`).join('');
      modalResponsibilities.innerHTML = (spec.responsibilities || []).map(item => { return typeof item === 'string' ? `<li>${item}</li>` : `<li>${item.title}: ${item.detail}</li>`; }).join('');
      modalNotes.innerHTML = (spec.notes || []).map(note => `<li>${note}</li>`).join('');
      modal.classList.add('open'); modal.setAttribute('aria-hidden', 'false'); document.body.classList.add('modal-open');
      if (window.lucide) window.lucide.createIcons();
    }

    function closeModal() { modal.classList.remove('open'); modal.setAttribute('aria-hidden', 'true'); document.body.classList.remove('modal-open'); }
    function renderEvents() {
      eventFeed.innerHTML = eventStore.map(evt => `
          <button class="log-item" type="button" data-event-id="${evt.id}">
            <div class="log-line"><span>${evt.title}</span><span class="sev ${evt.severity}">${evt.severity}</span></div>
            <span class="log-copy">${evt.detail}</span><span class="log-time">${evt.time}</span>
          </button>`).join('');
      eventFeed.querySelectorAll('.log-item').forEach(item => {
        item.addEventListener('click', () => {
          const hit = eventStore.find(evt => evt.id === item.dataset.eventId); if (!hit) return;
          openModal({ title: hit.title, subtitle: hit.detail, tags: [hit.severity.toUpperCase(), 'System Event'], responsibilities: ['Timestamp: ' + hit.time, 'Event ID: ' + hit.id], notes: ['This is a synthesized architecture deck event.'] });
        });
      });
    }

    function animateCounters() {
      document.querySelectorAll('[data-counter]').forEach(el => {
        const target = Number(el.getAttribute('data-counter')); const suffix = el.getAttribute('data-suffix') || '';
        const start = 0; const duration = 900; const startTime = performance.now();
        function update(ts) {
          const progress = Math.min((ts - startTime) / duration, 1);
          const value = Math.round(start + (target - start) * (1 - Math.pow(1 - progress, 3)));
          el.textContent = `${value}${suffix}`; if (progress < 1) requestAnimationFrame(update);
        }
        requestAnimationFrame(update);
      });
    }

    function animateBars() { document.querySelectorAll('.bar-fill').forEach(bar => { const width = Number(bar.dataset.width || 0); requestAnimationFrame(() => { bar.style.width = `${width}%`; }); }); }
    function animateRings() { document.querySelectorAll('.ring').forEach(ring => { const value = Number(ring.dataset.ring || 0); requestAnimationFrame(() => { ring.style.setProperty('--pct', String(value)); }); }); }

    function setupFilters() {
      const filterWrap = document.getElementById('planeFilters'); const nodes = [...document.querySelectorAll('.node')];
      filterWrap.addEventListener('click', evt => {
        const btn = evt.target.closest('.seg-btn'); if (!btn) return; const filter = btn.dataset.filter;
        filterWrap.querySelectorAll('.seg-btn').forEach(b => b.classList.toggle('active', b === btn));
        nodes.forEach(node => { const visible = filter === 'all' || node.dataset.plane === filter; node.classList.toggle('is-muted', !visible); });
      });
    }

    function setupToggles() {
      const flowToggle = document.getElementById('flowToggle'); const topologyGrid = document.getElementById('topologyGrid');
      if (flowToggle) flowToggle.addEventListener('change', () => { topologyGrid.classList.toggle('flow-active', flowToggle.checked); topologyGrid.classList.toggle('flow-paused', !flowToggle.checked); });
    }

    function setupNodes() {
      document.querySelectorAll('.node').forEach(node => { node.addEventListener('click', () => { renderDetail(node.dataset.node); }); });
      renderDetail(activeNodeId);
      document.getElementById('openDetailModal').addEventListener('click', () => { const spec = nodeSpecs[activeNodeId]; if (!spec) return; openModal(spec); });
    }

    function setupContracts() {
      document.querySelectorAll('.contract').forEach(card => {
        const open = () => { const spec = contractSpecs[card.dataset.contract]; if (!spec) return; openModal(spec); };
        card.addEventListener('click', open); card.addEventListener('keydown', e => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); open(); } });
      });
    }

    function setupIncidentSimulation() {
      const button = document.getElementById('simulateIncident');
      button.addEventListener('click', () => {
        const now = new Date(); const hh = String(now.getHours()).padStart(2, '0'); const mm = String(now.getMinutes()).padStart(2, '0'); const ss = String(now.getSeconds()).padStart(2, '0');
        eventStore.unshift({ id: 'evt-' + Math.random().toString(16).slice(2, 7), severity: 'high', title: 'Exploit signal surge detected', detail: 'Critical CVE moved to active exploitation state; AI recommendation queue elevated.', time: `${hh}:${mm}:${ss}` });
        if (eventStore.length > 8) eventStore.pop();
        ['enrichment-agent', 'esql-pipeline', 'action-agent'].forEach(id => { const node = document.querySelector(`.node[data-node="${id}"]`); if (!node) return; node.classList.remove('flash'); void node.offsetWidth; node.classList.add('flash'); });
        renderEvents();
      });
    }

    function setupPulse() {
      const pulse = document.getElementById('pulseRun');
      pulse.addEventListener('click', () => {
        document.querySelectorAll('[data-counter]').forEach(el => { const base = Number(el.getAttribute('data-counter')); const delta = Math.floor(Math.random() * 6); el.setAttribute('data-counter', String(base + delta)); });
        const local = document.getElementById('latencyLocal'); const cloud = document.getElementById('latencyCloud'); const ai = document.getElementById('latencyAi');
        const localValue = 110 + Math.floor(Math.random() * 30); const cloudValue = 650 + Math.floor(Math.random() * 80); const aiValue = 420 + Math.floor(Math.random() * 60);
        local.dataset.width = String(Math.min(35, Math.round(localValue / 7))); cloud.dataset.width = String(Math.min(96, Math.round(cloudValue / 10))); ai.dataset.width = String(Math.min(70, Math.round(aiValue / 8)));
        document.getElementById('latencyLocalText').textContent = `${localValue}ms`; document.getElementById('latencyCloudText').textContent = `${cloudValue}ms`; document.getElementById('latencyAiText').textContent = `${aiValue}ms`;
        animateCounters(); animateBars();
        eventStore.unshift({ id: 'evt-' + Math.random().toString(16).slice(2, 7), severity: 'info', title: 'System pulse executed', detail: 'Telemetry snapshot recalculated and command deck visuals updated.', time: new Date().toLocaleTimeString([], { hour12: false }) });
        if (eventStore.length > 8) eventStore.pop(); renderEvents();
      });
    }

    function setTheme(theme) {
      document.body.setAttribute('data-theme', theme); localStorage.setItem('argonaut-system-theme', theme);
      const sun = document.getElementById('themeSun'); const moon = document.getElementById('themeMoon'); const label = document.getElementById('themeLabel');
      if (sun && moon) { if (theme === 'dark') { sun.style.display = 'none'; moon.style.display = 'block'; if (label) label.textContent = 'DARK'; } else { sun.style.display = 'block'; moon.style.display = 'none'; if (label) label.textContent = 'LIGHT'; } }
    }

    function setupNavThemeToggle() {
      const toggle = document.getElementById('navThemeToggle'); if (!toggle) return;
      const saved = localStorage.getItem('argonaut-system-theme');
      const initialTheme = saved === 'light' || saved === 'dark' ? saved : window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      setTheme(initialTheme);
      toggle.addEventListener('click', () => { const current = document.body.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'; setTheme(current === 'dark' ? 'light' : 'dark'); });
    }

    function setupReveal() {
      const io = new IntersectionObserver(entries => { entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('is-visible'); }); }, { threshold: 0.14 });
      document.querySelectorAll('.reveal').forEach(el => io.observe(el));
    }

    modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });
    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

    setupReveal(); setupNavThemeToggle(); setupFilters(); setupToggles(); setupNodes(); setupContracts(); setupIncidentSimulation(); setupPulse(); renderEvents(); animateCounters(); animateBars(); animateRings();
    if (window.lucide) window.lucide.createIcons();
  </script>
</body>

</html>